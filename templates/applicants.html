{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="mb-0">Applicants</h2>
  <div>
    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalAddApplicant"><i class="fa-solid fa-user-plus"></i> New Applicant</button>
    <a href="{{ url_for('reports') }}" class="btn btn-outline-secondary ms-2"><i class="fa-solid fa-chart-simple"></i> Reports</a>
  </div>
</div>

<div class="card shadow-sm">
  <div class="table-responsive">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Email</th>
          <th>Course</th>
          <th>Status</th>
          <th>Applied</th>
          <th class="text-end">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for a in applicants %}
        <tr>
          <td>{{ a.id }}</td>
          <td>{{ a.full_name }}</td>
          <td><a href="mailto:{{ a.email }}">{{ a.email }}</a></td>
          <td>{{ a.course.name if a.course else '—' }}</td>
          <td>
            <span class="badge bg-{{ 'success' if a.status=='Admitted' else ('warning' if a.status=='Shortlisted' else ('danger' if a.status=='Rejected' else 'secondary')) }}">{{ a.status }}</span>
          </td>
          <td>{{ a.application_date.strftime('%Y-%m-%d') }}</td>
          <td class="text-end">
            <a class="btn btn-sm btn-outline-primary" href="{{ url_for('view_applicant', id=a.id) }}" title="View"><i class="fa-solid fa-eye"></i></a>
            <form method="post" action="{{ url_for('delete_applicant', id=a.id) }}" class="d-inline" onsubmit="return confirm('Delete applicant?');">
              <button class="btn btn-sm btn-outline-danger" title="Delete"><i class="fa-solid fa-trash"></i></button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr><td colspan="7" class="text-center text-muted">No applicants yet — add one.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% include '_modals.html' %}
{% endblock %}
